

# 泳装裁剪分床方法研究

## 一、一种基于裁床的裁剪分床方法

[中国专利数据库-浙江工业大学](http://dbpub.cnki.net/grid2008/dbpub/detail.aspx?dbcode=SCPD&dbname=SCPD2017&filename=CN106447089A&uid=WEEvREcwSlJHSldTTEYzVDhUSFJPNHdUWHBqb0I4OTQrK0VVZTA5R2Mvdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!)

**主要步骤：**

1. 设置初始限定条件；
2. 根据各型号样片所要裁剪的总数、每床铺布层数的上下限、每层步可裁剪总件数上下限 来计算需要的分床数；
3. 根据每个型号每床排的件数上限来确定各型号样片所有满足要求的配比；
4. 将符合要求的配比进行组合，计算各床应铺布的层数，再根据铺布层数和相应的配比计算出各型号样片数量，将该数量与要求裁剪的数量进行比较，如果差值在允许范围内则方案符合，否则舍弃。

**详细步骤**：

1. 对裁剪分床设定初始条件：由用户设定允许的裁剪误差范围值`w`，每床铺布层数的上限`Lu`和`Ld`，每层布可以裁剪总件数的上限`Tu`和`Td`，每个型号样片每床可以排的数量上限`Pu`，各型号样片所需裁剪的数量`Si`；
2. 根据设定的条件计算出可能的分床数量：根据各型号样片需要裁剪的数量计算出所有型号需要裁剪的总数量`S`，每层布可以裁剪数量的平均值`Taver`，每床铺布层数的平均值`Laver`，估算出需要分床数的最大值`Cu`和最小值`Cd`；
3. 确定各型号样片所有满足要求的多床次配比`Pbj`：根据已经得到的分床数最大值`Cu`和最小值`Cd`，从最小值到最大值依次取分床数Ci，然后确定各个型号样片配比的下限`Pbjmin`和上限`Pbjmax`，每种型号样片所有可能的配比有`Bj`种，根据排列组合原理列举出所有型号样片在各床铺的数量关系的所有组合，再逐一判断各个可能的配比`Pb`是否在对应的上限`Pbjmax`和下限`Pbjmin`之间，满足则保留，不满足则舍弃；同理计算出其他型号样片符合要求的配比情况；
4. 计算各床的铺布层数`L`：将第三步计算出的各个型号样片的配比进行组合，构造一个配比矩阵`A`，每种型号样片配比`Pbj`对应该矩阵的一行，需要求解的各床铺布层数L作为未知列向量`X`，构建矩阵方程`A*X = B`，其中`B`是由相应型号样片需要裁剪数量组成的列向量，求解矩阵方程得出各床铺布层数L的一个最小二乘解，该最小二乘解是一个近似解，再依次对各床铺布层数L在设定阈值范围内浮动；将浮动后的各床铺布层数依次组合，与对应的配比Pb计算出相应型号样片总数`Si`与实际的`Si`相比是否在可以接受的误差范围内。如果满足则保留该配比`Pb`和铺布层数L作为一种方案，否则舍弃；同理验证其他组合；如果当前床数`Ci`下所有可能组合都计算验证完毕，则返回第三步，继续使用下一个床数`Ci+1`进行验证，直至获取所有满足要求的方案。

## 二、基于改进实数编码遗传算法的服装裁剪分床方法

[中国专利数据库-浙江工业大学](http://dbpub.cnki.net/grid2008/dbpub/detail.aspx?dbcode=SCPD&dbname=SCPD2019&filename=CN109685247A&uid=WEEvREcwSlJHSldTTEYzVDhUSFJPNHdUWHBqb0I4OTQrK0VVZTA5R2Mvdz0=$9A4hF_YAuvQ5obgVAqNKPCYcEjKensW4IQMovwHtwkF4VYPoHbKxJw!!)

> 提供了一种有效的服装裁剪分床方法，有效的提高了效率，改善了对不同订单的适用性。

**主要步骤**：

1. 根据订单，由用户设定裁剪分床初始约束条件，计算出可能的分床数范围以及铺布层数和配比的上下限；
2. 设置实数编码遗传算法的初始参数，从床数较小的情况开始搜索；
3. 利用遗传算法和枚举发确定一定床数下的最优方案，分析该方案的可行性，若不可行则增加床数继续搜索最优方案，重复以上步骤，直至搜索到可行的最优方案。

**详细步骤**：

1. 设定裁剪分床的约束条件：根据用户的订单确定裁剪数量D，设定服装型号数Number，各型号允许裁剪的误差范围er，每床铺布层数X的上限Xmax和下限Xmin，每层布可以裁剪总数T的上限Tmax和下限Tmin，各型号样片规格配比Y上限Ymax；
2. 确定裁床数的CH范围：根据第一步中设定的每床铺布层数X的上限Xmax和下限Xmin，计算出平均每床铺布层数Xave，同理根据每层裁剪总数的上限和下限计算出平均值Tave，再根据总的裁剪数量，进而确定所需要的分床数量CH的上限CHmax和下限CHmin；
3. 建立分床优化模型：在确定了一个CH值的情况下，目标优化函数E = （X*Y - D）exp2，其中E是每个规格实际生产数量与订单要求数量的误差的平方和，X为各裁床上的铺布层数，Y为各裁床上各型号排放件数即配比，D为第一步中用户提供的实际订单需要的裁剪数量；在床数确定的条件下，以E为目标调整X和Y的取值，尽可能的是得E的值足够下；
4. 先利用改进的实数编码遗传算法搜索铺布层数X，再用枚举法计算对应的最佳排放件数组合Y，过程如下：
   - 设置初始参数，设定种群大小为SP，进化最大代数为Maxgen，交叉概率参数c1、c2设为常数，初始变异概率为Pm；随机产生2 * SP个个体，每个个体有number个基因位，对应number个服装号型；每个基因位表示一张裁床上某种服装号型的铺布层数，采用实数编码方式，不转换成二进制，可以节省编码时间；然后根据公式fit = 1/E计算2 * SP个个体的适应度函数值fit，其中E为第三步中的误差的平方和，取适应度值最高的SP个体作为初代铺布层数解集，建立一个库T用于存储所有出现过的个体，并将初代铺布层数X加入T中；
   - 利用遗传算法结合禁忌搜索思想搜索铺布层数，当搜索到一组铺布层数解时，利用枚举法计算出可能的排放件数组合Y；在迭代寻优的过程中，将一个包含number中规格的订单分解为number个目标，只要number个目标的误差平方和最小，总误差就最小；
   - 将每代最佳个体GX与历史最佳个体BX比较，根据公式来更新历史最佳个体，同时调整与之唯一对应的最佳配比BY，保证算法寻优过程中不会出现返祖现象，在进化的过程中，历史最佳BX越来越接近全局最佳；
   - 若迭代次数gen达到最大迭代次数Maxgen或误差平方和小于10，结束循环，输出最佳铺布层数BestX和最佳配比BestY，否则gen = gen + 1，并转到上一步继续进行
5. 判断最后输出的组合是否满足用户的误差约束条件，若满足条件，则该组合是最佳方案，否则，需要在分床数量上限Cmax和下限Cmin范围内，求解CH+1时的最佳铺布层数和最佳配比，重复最后两步。



