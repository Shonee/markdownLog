[TOC]

###### 20190919服良项目需要修改问题

- [x] 原材料合同导入时，
  - 数据是同一品番的物料归类信息，不需要做检查，直接导入即可
  - 品名根据中英文对照表
- [x] 装箱单导入时，
  - 根据品番到原材料数据中获取单价，
  - 然后是品番+色号匹配物料基本信息
  - 品名根据中英文对照表
- [ ] 物料信息模块，
  - 数据多了，有点卡，如何优化？？

###### 20190927 来料报告-装箱单-出入库等页面修改：(已解决)

- [x] 装箱单入库


​	要有科目信息、供应商信息，都是通过选择,,,数据库表已经添加字段

- [x] 根据箱号入库时：


​	点击入库，不要清空所有内容，只把箱号清空，并去除已入库的箱号	

​	未关闭页面，选择其他装箱单时，需要换一个入库编号，回来时也换回来	数据删除时，点击数据，提示有详情数据，点击确定后全部删除

​	双击数据编辑时，可以修改已入库物料详情数据的数量和库位，

​	前提是，`K3`中不在会计期间，库存数量允许此操作

- [x] 来料报告：


​	自购/来料 属性要从色号指示书对应表中获取相应字段值

​	来料单不要在导入装箱单的时候弹出，而是放在外面，根据合同生成

​	生成来料报告时，当前合同下的来料信息进行汇总，然后生成

- [x] 面料装箱单：


​	面料装箱单导入到和物料同一个表中，

- [x] 原材料导入：

​	导入数据中需要获取原材料的混率，导出清单页面要显示



###### 20191009入库未解决问题:    (已解决)

- [x] ​	装箱单入库时，选择装箱单显示内容太慢
- [x] ​	装箱单入库时，按箱号入库后继续入库，刷新显示剩余所有，也慢
- [x] ​	装箱单入库后，编辑更改存放位置时，对相应库存信息要更改
- [x] ​    装箱单入库时，同一个装箱单的物料在同一天，要入在同一个入库单
- [x] ​    入库页面，下方`gridView`不能跟随上方数据及时刷新问题



###### 20191016	服良修改内容

- [x] ​	入库时，要整体选择一个仓库库位，默认所有数据是这个，个别可以调
- [ ] ​	入库时，分页控件不要了
- [x] ​	入库时，装箱单入库分箱入库按钮，批量入库时提示不可用
- [ ] ​    入库时的一个类型，生产归还，拿出来，以出库形式入库
- [x] ​    入库时，每个物料都都自己的所属合同
- [x] ​    入库时，面料有匹号

###### 20191017    服良修改内容

- [x] ​	入库时不要选择科目，根据每个物料的科目内容带出
- [x] ​	入库时，要先选择仓库再选择库位，因为库位比较多不好找
- [x] ​	入库时，使用一个按钮，代码判断是否单箱/批量入库
- [ ] ​    入库时，物料数量为0代表不入库，过滤掉
- [ ] ​	余料转库存时，也分有价和无价，此时无论有价无价都不进行`K3`同步
- [ ] ​    系统时间全部换成服务器时间
- [x] ​    背景颜色统一掉
- [ ] ​    **大问题！**  面料导入直接保存，根据数据库中数据进行辅料清单导出
- [ ] ​    趁势：试着看看单独建一个进度条页面，使用公共方法进行调用



入库改动设计实体：

​	入库涉及：

​	采购详情、送货详情、出库详情、仓库物料、库位物料、合同物料

###### 20191021服良问题：

- [x] ​	领料多订单数量计算错误
- [x] ​	领料计划导出时添加订单品番，多订单的显示在一块
- [x] ​	领料计划导出单中，换算单位时要进位
- [ ] ​	关于导出时领料数量进位，在领料出库时数据上要保持一致
- [ ] ​	出库不分退货/外协和领料，因为都是不同部门进行的领料
- [ ] ​	转库要单独出来

###### 20191022服良_生产领料

- [ ] ​	一个领料计划生成后，相同订单不可以再次生成，除非删除掉之前的

###### 20191025 服良修改内容

- [x] ​	批量入库时判断没有选择库位，提示不能入库
- [x] ​	入库页面默认无价
- [x] ​	装箱单到货信息显示页面，显示列调一下，增加品番显示，上一层也要显示品番
- [x] ​	红字对冲入库功能写好
  - [ ] 可以看到，但是还没有判断红字入库时仓库中数量的问题
- [x] ​	删除所有数据时，子表根据主表选中数据查找ID并显示，会出现错误
- [x] 装箱单导入时要选择导入模式是CO或大生产，CO不与加工指示书&色号指示书比较



###### 20191104 服良修改内容

- [x] ​	出库时如果库存不够，提示库存不够，并将当前出库数量修正到库存数量
- [x] ​	领料批次显示，，禁止超指示出库？
- [x] ​	合同号，领料部门关联领料内容？ 领料内容不是根据领料单的吗？

​	

###### 20191105 服良出入库修改第1000遍！

- [x] ​	用生产领料计划出库时，要根据计划中的部门进行选择，按部门出库
- [x] ​	余料退还要手工输入，以红字方式出库
- [x] ​	红字出入出库方式：1、手动输入品番色号 2、根据蓝字出/入库单引入
- [x] ​	单独一个页面来进行手动输入吧
- [x] ​    领料出库先选择合同，再选择领料计划
- [x] ​    入库红字对冲   手动输入 + 使用退货单号（入库单号）
- [x] ​    出库红字对冲   手动输入 + 使用出库单号  



###### 20191111服良出入库领料修改第1001遍

- [x] ​    领料单领料时精确到小数点后四位
- [x] ​    入库时，红字对冲批量入库不好使，不选择供应商时不好使
- [x] ​    领料出库也要分有价无价
- [x] ​    使用公共方法进行`K3`数据同步时报错(**运行CPU不一致！**)
- [x] ​    出库的时候，根据物料ID和合同ID进行筛选
- [x] ​    领料的时候，明细表点击事件错误



###### 20191115服良出入库领料修改 the last

- [x] ​	入库时物料价格从采购清单中获取，并作价格平均
  - [x] 对入库页面，同步仓库、库位物料信息代码整理
  - [x] 入库时，有价无价默认不选择，要检测必选
  - [x] 装箱单入库，选择同一个装箱单使用同一单号，供应商带出来
  - [x] 入库供应商控件改为`lookupedit`
  - [x] 入库红字改成字体为红色而不是背景红色
  - [x] 入库红字入库数量，比较入库单数量和库存数量，取较小的值
  - [x] 入库按钮已经改写，要在保存后关闭当前页面，要做检测
- [x] ​    每个物料设置一个最小领料量，小于此值时，按最小量进行领料
- [x] ​    装箱单导出发票时，同物料要进行合并
  - [x] ​    根据物料合并了，但是发票上不区分色号，是否应该按物料名称合并呢？？（即同品番不同色号是否要合并？）
  - [x] `FrmMasterPU_SendBill.cs`
- [x] ​    出库同物料多仓位时，构建领料要根据仓位分开显示物料信息
- [x] ​    出入库蓝字手动输入不要了，领料计划要做一个手动添加领料物料   
  - [x] 出入库蓝字手动功能未删除，红蓝字可选功能未删除
- [x] ​	出库时，根据领料计划，如果第一次没领完的物料，累加到第二次

